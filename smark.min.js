!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.returnExports=t()}(this,function(){return smark={youtubeRE:/^(?:https?:\/\/)?(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch|embed\/watch|embed)?[\?\/]?(?:v=|feature=player_embedded&v=)?(\w+)$/,vimeoRE:/^(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/)?(?:\w+\/)?(\d+)$/,imageRE:/^(?! )(.+?\.(?:jpg|jpeg|gif|png|bmp))(?: -title="(.+?)")?(?:\(.+?\))?$/,imageLinkRE:/(?:\((.+?)\)){1}/,htmlRE:/^((?!.*(jpg|jpeg|gif|png|bmp))(https?:\/\/)[\w\-_]+(\.[\w\-_]+)+[\w\-.,@?^=%&:\/~\\+#]*)|.+\.(?!jpg|jpeg|gif|png|bmp)html?$/,linkRE:/\[(.*?)\](?:|-blank) ?\((.+?)\)/g,linkBlankRE:/\[(.*?)\]-blank ?\((.+?)\)/g,olRE:/(?:\d\.\s(.+?) \| ?)+/g,olliRE:/\d\.\s(.+?) \|/g,ulRE:/(?:\*\s(.+?) \| ?)+/g,ulliRE:/\*\s(.+?) \|/g,h6RE:/#{6} (.+?) #{6}/g,h5RE:/#{5} (.+?) #{5}/g,h4RE:/#{4} (.+?) #{4}/g,h3RE:/#{3} (.+?) #{3}/g,h2RE:/#{2} (.+?) #{2}/g,h1RE:/# (.+?) #/g,hrRE:/\s---\s/g,bqRE:/```(.+?)(?:\[-source:(.+)\])?```/g,dQuotRE:/([[\n \.,;:])\\?"(.+?)\\?"([\n \.,;:\b\]])/g,sQuotRE:/([[\n \.,;:])\\?'(.+?)\\?'([\n \.,;:\b\]])/g,volRE:/\bvol\.\s\b/gi,pRE:/\bp\.\s\b(?=\d+)/g,cRE:/\bc\.\s\b(?=\d+)/g,flRE:/\bfl\.\s\b(?=\d+)/g,ieRE:/\bi\.e\.\s\b/g,egRE:/\be\.g\.\s\b/g,aposRE:/([A-Za-z]+)'([a-z]+)/g,endashRE:/(\d+)-(\d+)/g,elipseRE:/\.{3}/g},smark.generate=function(e,t){var a=e,i=!0,l="",r="";if(void 0!==t)for(var h=0;h<t.length;h++)t[h]==noTypo&&(i=!1);return this.youtubeRE.test(e)?(a=e.replace(this.youtubeRE,"$1"),l='<iframe class="smark youtube" src="https://www.youtube.com/embed/'+a+'" frameborder="0" width="853" height="480" allowfullscreen></iframe>',r="youtube"):this.vimeoRE.test(e)?(a=e.replace(this.vimeoRE,"$1"),l='<iframe class="smark vimeo" src="https://player.vimeo.com/video/'+a+'" frameborder="0" width="853" height="480" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>',r="vimeo"):this.imageRE.test(e)?(tmp1=e.replace(this.imageRE,"$1"),tmp2=e.replace(this.imageRE,"$2"),tmp2=this.typographicChanges(!0,tmp2),l='<img class="smark image" title="'+tmp2+'" src="'+tmp1+'">',this.imageLinkRE.test(e)&&(tmp3=this.imageLinkRE.exec(e)[0],tmp3=tmp3.substring(1,tmp3.length-1),l='<a href="'+tmp3+'" target="_blank">'+l+"</a>"),r="image"):this.htmlRE.test(e)?(a=e.match(this.htmlRE)[0],l='<iframe class="smark website" src="'+a+'" width="853" height="480" frameborder="0"></iframe>',r="website"):(a=this.parseParagraph(i,a),l='<p class="smark paragraph">'+a+"</p>",r="paragraph"),{html:l,type:r}},smark.typographicChanges=function(e,t){return t=t.replace(this.dQuotRE,"$1&#8220;$2&#8221;$3"),t=t.replace(this.sQuotRE,"$1&#8216;$2&#8217;$3"),t=t.replace(this.volRE,"Vol."),t=t.replace(this.pRE,"p."),t=t.replace(this.cRE,"<i>c.</i>"),t=t.replace(this.flRE,"<i>fl.</fl>"),t=t.replace(this.ieRE,"<i>ie</i> "),t=t.replace(this.egRE,"<i>eg</i> "),t=t.replace(this.aposRE,"$1&#8217;$2"),t=t.replace(this.endashRE,"$1&#8211;$2"),t=t.replace(this.elipseRE,"&#8230;")},smark.parseParagraph=function(e,t){t=this.typographicChanges(e,t);var a="";""===t.replace(this.linkRE,"$1")?(a='<a href="$2">$2</a>',this.linkBlankRE.test(t)&&(a='<a target=_blank href="$2">$2</a>')):(a='<a href="$2">$1</a>',this.linkBlankRE.test(t)&&(a='<a target=_blank href="$2">$1</a>')),t=t.replace(this.linkRE,a);var i=t.match(this.olRE);if(null!=i)for(var l=0;l<i.length;l++){var r=i[l].match(this.olliRE);a="<ol>";for(var h=0;h<r.length;h++)a+="<li>"+r[h].replace(this.olliRE,"$1")+"</li>";a+="</ol>",t=t.replace(i[l],a)}var s=t.match(this.ulRE);if(null!==s)for(var l=0;l<s.length;l++){var r=s[l].match(this.ulliRE);a="<ul>";for(var h=0;h<r.length;h++)a+="<li>"+r[h].replace(this.ulliRE,"$1")+"</li>";a+="</ul>",t=t.replace(s[l],a)}return t=""===t.replace(this.bqRE,"$2")?t.replace(this.bqRE,"<blockquote><p>$1</p></blockquote>"):t.replace(this.bqRE,"<blockquote><p>$1</p><footer>$2</footer></blockquote>"),t=t.replace(this.h6RE,"<h6>$1</h6>"),t=t.replace(this.h5RE,"<h5>$1</h5>"),t=t.replace(this.h4RE,"<h4>$1</h4>"),t=t.replace(this.h3RE,"<h3>$1</h3>"),t=t.replace(this.h2RE,"<h2>$1</h2>"),t=t.replace(this.h1RE,"<h1>$1</h1>"),t=t.replace(this.hrRE,"<hr />")},smark});
